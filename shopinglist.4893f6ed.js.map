{"mappings":"gfAAAA,EAAA,S,4CCAA,IAQsBC,EAPhBC,EAAa,IAAI,EADvBF,EAAA,SACuBG,YACnBC,EAAW,GACTC,EAAwBC,SAASC,cAAc,eASrD,SAAoCC,GAIlC,GAHEC,QAAQC,IAAI,IAGTF,EAAIG,OAAS,EAGhB,OAFAF,QAAQC,IAAI,cACZL,EAAsBO,UAAY,mEAehCJ,EAAIK,SAAQ,SAAAC,GACZZ,EAAWa,OAASD,EAAGE,IACVd,EAAWe,cACnBC,MAAK,SAAAC,G,OAAMf,EAASgB,KAAKD,EAAGE,K,IACjCZ,QAAQC,IAAIN,E,IAIlBkB,EAnCEb,QAAQC,IAAI,GAEuD,QAA/CT,EAAAsB,KAAKC,MAAMC,aAAaC,QADtB,iBAC6C,IAA/CzB,IAAmD,KAuHzEQ,QAAQC,IAAIL,GAGZA,EAAsBsB,mBAAmB,aAjFnB,SAAAC,GAClBnB,QAAQC,IAAI,GACd,IAAMmB,EAASD,EAASE,KAAI,SAAAC,GAGxB,OADAtB,QAAQC,IAAIqB,GACRC,OAAOC,WAAW,sBAAsBC,SAC1CzB,QAAQC,IAAIqB,GACL,0CAMLI,OAN+CJ,EAAKf,IAAI,8RAO/BmB,OADzBJ,EAAKK,WACN,4BACCD,OADyBJ,EAAKM,iBAAiB,YAGfF,OAFhCJ,EAAKO,kBACN,gDAEqCH,OADJJ,EAAKQ,OAAO,4DAEVJ,OADEJ,EAAKS,MAAM,oDAG/CL,OAFkCJ,EAAKU,UAAU,kDAOjDN,OALAJ,EAAKW,UAAU,GAAGC,IACnB,kNASCR,OALAJ,EAAKW,UAAU,GAAGC,IACnB,iOAQsCR,OAJrCJ,EAAKW,UAAU,GAAGC,IACnB,0QAGuDR,OAAjBJ,EAAKa,YAAY,6BAGxDnC,QAAQC,IAAIqB,GACL,0CAKLI,OAL+CJ,EAAKf,IAAI,kPAM/BmB,OADzBJ,EAAKK,WACN,4BACCD,OADyBJ,EAAKM,iBAAiB,YAGXF,OAFpCJ,EAAKO,kBACN,0DAEmCH,OADEJ,EAAKS,MAAM,oDAEVL,OADHJ,EAAKU,UAAU,uDAEjBN,OADKJ,EAAKa,YAAY,kDAItDT,OAHgCJ,EAAKQ,OAAO,kEAQ5CJ,OALAJ,EAAKW,UAAU,GAAGC,IACnB,kNASCR,OALAJ,EAAKW,UAAU,GAAGC,IACnB,iOAKAR,OADCJ,EAAKW,UAAU,GAAGC,IACnB,kO,IAMJE,KAAK,IAERC,YAAYlC,UAAY,GACxBmC,WAAWnC,UAAYiB,EACvBmB,aAAaC,UAAUC,IAAI,mB","sources":["src/shopinglist.js","src/js/shopping-list.js"],"sourcesContent":["import './js/header-current-link.js';\nimport './js/modal-current-link.js';\nimport './js/theme-toggle.js'\nimport './js/mobile-modal-window';\nimport './js/support-section.js';\nimport './js/shopping-list.js'\n// import './js/pop-up-modal-window.js';\n// import './js/pop-up-modal-rendering.js';","import { FetchBooks } from './booksApi';\nconst fetchBooks = new FetchBooks();\nlet booksArr = [];\nconst shoppingListContainer = document.querySelector('.shop-list');\n\nfunction getBooksFromLocalStorage() {\n  console.log(1);\n  const BOOKS_STORAGE = 'books';\n  const storedBooks = JSON.parse(localStorage.getItem(BOOKS_STORAGE)) ?? [];\n  return storedBooks;\n}\n\nfunction displayBooksInShoppingList(ids) {\n    console.log(2);\n  // const booksData = getBooksFromLocalStorage(); \n\n  if (!ids.length > 0) {\n    console.log('Empty');\n    shoppingListContainer.innerHTML = '<p>This page is empty, add some books and proceed to order.</p>';\n    return;\n  } \n    // shoppingListContainer.innerHTML = '';\n    // booksData.forEach((book._id) => {\n    //   const bookCard = createBookCard(book);\n    //   shoppingListContainer.appendChild(bookCard);\n    // });\n    // booksData.forEach((el, index) => { \n    //   fetchBooks.bookId = el._id;\n    //   const bookInfo = fetchBooks.fetchBookId().then(result => { return result.author });\n\n    //   console.log(resultBookInfo);\n\n    // });\n      ids.forEach(id => {\n      fetchBooks.bookId = id._id;\n      const data = fetchBooks.fetchBookId();\n      data.then(el => booksArr.push(el.data));\n      console.log(booksArr);\n    });\n    }\n\ndisplayBooksInShoppingList(getBooksFromLocalStorage()); \n\n\n\n// const markUp = shopListRenderBooks(booksArr);\n// function shopListRenderBooks(booksArr) {\n\n\n  const renderBooks = booksArr => { \n    console.log(3);\n  const markUp = booksArr.map(book => {\n\n      console.log(book);\n      if (window.matchMedia('(max-width: 376px)').matches) {\n        console.log(book);\n        return `<li><div class=\"shoplist-book-card\" id=${book._id}>\n        <button type=\"button\" class=\"shoplist-delete-book-btn\">\n        <img src=\"\" class=\"shoplist-delete-book-icon\" alt=\"Delete book\" width=\"15\" height=\"15\" />\n        </button>\n        <div class=\"shoplist-book-card-top\">\n        <div><img class=\"shoplist-book-cover\" src=${\n          book.book_image\n        } alt=\"book cover\" width=${book.book_image_width} height=${\n          book.book_image_height\n        }/>\n        <p class=\"shoplist-book-author\">${book.author}</p></div>\n        <div><p class=\"shoplist-book-title\">${book.title}</p>\n        <p class=\"shoplist-book-category\">${book.list_name}</p>\n        <div class=\"shops-logo\"><a href=${\n          book.buy_links[0].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n        <img src=\"\" class=\"shop-logo amazon\" width=\"48\" height=\"15\" alt=\"Amazon\" />\n        </a>\n        <a href=${\n          book.buy_links[1].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Apple Books\">\n        <img src=\"\" class=\"shop-logo apple-books\" width=\"28\" height=\"27\" alt=\"Apple Books\" />\n        </a>\n        <a href=${\n          book.buy_links[4].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Book Shop\">\n        <img src=\"\" class=\"shop-logo book-shop\" width=\"32\" height=\"30\" alt=\"Book Shop\" />\n        </a></div></div></div>\n        <p class=\"shoplist-book-description\">${book.description}</p>\n      </div></li>`;\n      } else {\n        console.log(book);\n        return `<li><div class=\"shoplist-book-card\" id=${book._id}>\n        <button type=\"button\" class=\"shoplist-delete-book-btn\">\n          <img src=\"\" class=\"shoplist-delete-book-icon\" alt=\"Delete book\" width=\"14\" height=\"14\" />\n        </button>\n        <div><img class=\"shoplist-book-cover\" src=${\n          book.book_image\n        } alt=\"book cover\" width=${book.book_image_width} height=${\n          book.book_image_height\n        }/></div>\n        <div><p class=\"shoplist-book-title\">${book.title}</p>\n        <p class=\"shoplist-book-category\">${book.list_name}</p>\n        <p class=\"shoplist-book-description\">${book.description}</p>\n        <p class=\"shoplist-book-author\">${book.author}</p>\n        </div>\n        <div class=\"shops-logo\"><a href=${\n          book.buy_links[0].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n        <img src=\"\" class=\"shop-logo amazon\" width=\"48\" height=\"15\" alt=\"Amazon\" />\n        </a>\n        <a href=${\n          book.buy_links[1].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Apple Books\">\n        <img src=\"\" class=\"shop-logo apple-books\" width=\"28\" height=\"27\" alt=\"Apple Books\" />\n        </a>\n        <a href=${\n          book.buy_links[4].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Book Shop\">\n        <img src=\"\" class=\"shop-logo book-shop\" width=\"32\" height=\"30\" alt=\"Book Shop\" />\n        </a></div>\n      </div></li>`;\n      }\n    })\n    .join('');\n    // return newArr;\n  shopIsEmpty.innerHTML = '';\n  bookListEl.innerHTML = markUp;\n  sectionTitle.classList.add('title-when-books');\n};\n\nconsole.log(shoppingListContainer);\n// console.log(markUp);\n\nshoppingListContainer.insertAdjacentHTML('beforeend', renderBooks);"],"names":["parcelRequire","ref","$399cd7aec2522034$var$fetchBooks","FetchBooks","$399cd7aec2522034$var$booksArr","$399cd7aec2522034$var$shoppingListContainer","document","querySelector","ids","console","log","length","innerHTML","forEach","id","bookId","_id","fetchBookId","then","el","push","data","$399cd7aec2522034$var$displayBooksInShoppingList","JSON","parse","localStorage","getItem","insertAdjacentHTML","booksArr1","markUp","map","book","window","matchMedia","matches","concat","book_image","book_image_width","book_image_height","author","title","list_name","buy_links","url","description","join","shopIsEmpty","bookListEl","sectionTitle","classList","add"],"version":3,"file":"shopinglist.4893f6ed.js.map"}