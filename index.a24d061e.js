function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=t.parcelRequiree062;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return o[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequiree062=s),s.register("kyEFX",(function(t,o){var n,s;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return s}),(function(e){return s=e}));var a={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)a[t[o]]=e[t[o]]},s=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s("kyEFX").register(JSON.parse('{"5ZPII":"index.a24d061e.js","ewt39":"icon-x-close.0d6025fe.svg","dUcaX":"amazon-link_2x.fad82e15.png","8BG5f":"book-link_2x.cdd3fb2c.png","eYuym":"shopinglist.cb3b104f.js"}'));var a=s("ju4sA");var r=function(e,t){let o="";for(let n=0;n<t;n+=1){const{_id:t,book_image:s,title:a,author:r}=e[n];o+=`\n      <li class="item-category-book js-book-modal" data-book-id="${t}">\n        <a class="link-books-render" href="#">  \n      <div class="card-book">\n            <div class="img-card-book">\n            <img src="${s}" alt="book" class="img-book">\n            </div>\n              <div class="box-text-book-best">\n                <div class="box-title">  \n                  <p class="title-book">${a}</p>\n                </div>\n                  <div class="box-author">  \n                  <p class="author-book">${r}</p>\n                  </div>\n                </div>\n          </div>\n        </a>\n          </li>\n  `}return o};function c(e,t){return`\n  <li class="top-books-containers ">\n  <h3 class="item-category">${t}</h3>\n  <ul class="box-category">\n  ${e}\n  </ul>\n  <button type="button" aria-label="Show more" class="see-more">See more</button>\n  </li>\n  `}var i=async function(e){const t=document.querySelector(".top-books");t.innerHTML='<h2 class="main-title">Best Sellers<span class="color-accent"> Books</span></h2>';try{if(window.screen.width<767.8)for(let o=0;o<4;o+=1){const n=1,{books:s,list_name:a}=e[o],i=c(r(s,n),a);t.insertAdjacentHTML("beforeend",i)}else if(window.screen.width>767.8&&window.screen.width<1440)for(let o=0;o<4;o+=1){const n=3,{books:s,list_name:a}=e[o],i=c(r(s,n),a);t.insertAdjacentHTML("beforeend",i)}else if(window.screen.width>=1440)for(let o=0;o<4;o+=1){const n=5,{books:s,list_name:a}=e[o],i=c(r(s,n),a);t.insertAdjacentHTML("beforeend",i)}else console.error("ops... something went wrong, contact us via email")}catch(e){console.log(e)}};const l=new(0,a.FetchBooks);async function d(){try{const e=await l.fetchTopBooks();i(e.data)}catch(e){console.error(e)}}d();var u=d;a=s("ju4sA");const p=document.querySelector(".categories-select-wrapper");var b=function(e){const t=document.createElement("ul");t.classList.add("categories-list");const o=document.createElement("li"),n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("id","All categories"),n.classList.add("categories-active","categories-list-el"),n.textContent="All categories",o.appendChild(n),t.appendChild(o),e.forEach(((o,n)=>{const s=document.createElement("li"),a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("id",`${e[n].list_name}`),a.classList.add("categories-list-el"),a.textContent=`${o.list_name}`,s.appendChild(a),t.appendChild(s)})),p.appendChild(t)};var m=async function(e){const t=e.category;try{const o=await e.fetchCategoryOfBooks().then((e=>e.data));o.length;const n=r(o,o.length);await function(e,t){const o=function(e){const t=e.split(" ");if(t.length>1){const e=t.pop();return{string:t.join(" "),lastWord:e}}return console.log(error)}(e),n=(document.querySelector(".books-content"),`<h2 class="main-title">${o.string} <span class="color-accent">${o.lastWord}</span></h2>`);document.querySelector(".top-books").innerHTML=`${n}<div class="cat-books-container">${t}</div>`}(t,n)}catch(e){console.log(e)}};var g=async function(e,t){if("BUTTON"!==e.target.nodeName)return;try{if("All categories"===e.target.id){u();return document.querySelector(".categories-active").classList.remove("categories-active"),void e.target.classList.add("categories-active")}}catch(e){console.log(e)}document.querySelector(".categories-active").classList.remove("categories-active"),e.target.classList.add("categories-active");try{t.category=e.srcElement.id,await m(t)}catch(e){console.log(e)}};const h=document.querySelector(".categories-select-wrapper"),f=new(0,a.FetchBooks);!async function(){try{const e=await f.fetchCategoryList();await b(e.data)}catch(e){console.error(e)}}(),h.addEventListener("click",(e=>g(e,f))),s("g3WOS"),s("OrxsF"),s("9h4Q6");a=s("ju4sA");s("ju4sA");var k;k=new URL(s("kyEFX").resolve("ewt39"),import.meta.url).toString();var v;v=new URL(s("kyEFX").resolve("dUcaX"),import.meta.url).toString();var _;function y(e,t){const o=t?'<button class="card__btn add-card__bnt btn">remove from shop list</button> <p class = "congrat-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.!</p>':'<button class="card__btn add-card__bnt btn">add to shop list</button> <p class = "congrat-text"></p>';return`<div class="backdrop backdrop__modal js-book-modal">\n  <div class="modal book-card__modal scrollable">\n\n    <button class="modal-close__btn js-book-close">\n           <img class="close__icon"src=${new URL(k)} alt="close_icon" />\n    </button>\n    <div class="book-card">\n      <div class="book-card__thumb">\n        <img class="book-card__img" src="${e.book_image}" alt="book_image" loading="lazy" />\n      </div>\n      <div class="book-info">\n        <h2 class="book-title">${e.title}</h2>\n        <h3 class="book-author">${e.author}</h3>\n        <p class="book-description">${e.description}</p>\n        <ul class="shops-list list">\n          <li class="shops-item">\n            <a\n              class="buy-links"\n              href="${e.amazon_link}"\n              aria-label="amazon-shop icon"\n              target="_blank"\n              rel="noopener noreferrer"\n            >\n              <img\n                class="amazon-shop__icon book-shop__icons"\n                src="${new URL(v)}"\n                alt="amazon-shop icon"\n                loading="lazy"\n              />\n            </a>\n          </li>\n          <li class="shops-item">\n            <a\n              class="buy-links"\n              href="${e.apple_link}"\n              aria-label="apple-book icon"\n              target="_blank"\n              rel="noopener noreferrer"\n            >\n              <img\n                class="apple-book__icon book-shop__icons"\n                src="${new URL(_)}"\n                alt="apple-book icon"\n                loading="lazy"\n              />\n            </a>\n          </li>\n         \n        </ul>\n      </div>\n      \n    </div>\n    <div class="book-card__btn">${o}</div>`}function w(){window.onscroll=function(){},document.body.classList.remove("blockScroll")}_=new URL(s("kyEFX").resolve("8BG5f"),import.meta.url).toString();const S=document.querySelector(".top-books");S&&S.addEventListener("click",(async e=>{var t,o;const n=e.target.closest("li.js-book-modal");if(!n)return;!function(){let e=0,t=0;e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft,document.body.classList.add("blockScroll"),window.onscroll=function(){window.scrollTo(t,e)}}();const s=n.getAttribute("data-book-id"),r=new(0,a.FetchBooks);r.bookId=s;const c=(await r.fetchBookId()).data,i={book_image:c.book_image,title:c.title,description:c.description,author:c.author,amazon_link:null===(t=c.buy_links.find((e=>"Amazon"===e.name)))||void 0===t?void 0:t.url,apple_link:null===(o=c.buy_links.find((e=>"Apple Books"===e.name)))||void 0===o?void 0:o.url},l="books",d=document.createElement("div");d.innerHTML=y(i,b(s)),document.body.appendChild(d);const u=e=>{"Escape"===e.key&&(document.body.removeChild(d),document.removeEventListener("keyup",u),w())};document.addEventListener("keyup",u);d.querySelector(".modal-close__btn").addEventListener("click",(function(e){document.body.removeChild(d),document.removeEventListener("keyup",u),e.stopPropagation(),w()}));const p=d.querySelector(".backdrop__modal");function b(e){let t=localStorage.getItem(l);return t||(t="[]"),void 0!==JSON.parse(t).find((t=>t._id===e))}p.addEventListener("click",(function(e){if(e.target!==p)return;document.body.removeChild(d),document.removeEventListener("keyup",u),e.stopPropagation(),w()}));const m=document.querySelector(".congrat-text");d.querySelector(".add-card__bnt").addEventListener("click",(e=>{b(s)?(!function(e){console.log("removing",e);let t=localStorage.getItem(l);if(null===t)return;let o=JSON.parse(t);o=o.filter((t=>t._id!==e._id)),localStorage.setItem(l,JSON.stringify(o))}(c),e.target.innerText="add to shopping list",m.textContent=""):(!function(e){console.log("adding",e);let t=localStorage.getItem(l);t||(t="[]");const o=JSON.parse(t);o.push(e),localStorage.setItem(l,JSON.stringify(o))}(c),e.target.innerText="remove from the shopping list",m.textContent="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.")}))})),s("ghhZM"),s("g3WOS"),s("OrxsF"),s("9h4Q6"),s("gjiCh"),s("kB3cp");
//# sourceMappingURL=index.a24d061e.js.map
